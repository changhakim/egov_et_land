<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bit_etland.web.prod.ProductMapper">

	<resultMap id="result" type="hashmap">
  	<id property="productID" column="PRODUCT_ID" />
  	<result property="productName" column="PRODUCT_NAME"/>
  	<result property="supplierID" column="SUPPLIER_ID"/>
  	<result property="categoryID" column="CATEGORY_ID"/>
  	<result property="unit" column="UNIT"/>
  	<result property="price" column="PRICE"/>
	</resultMap>
	<select id="selectProduct" resultType="com.bit_etland.web.prod.Product">
	  SELECT PRODUCT_ID productID,  
	  	PRODUCT_NAME productName, 
        SUPPLIER_ID supplierID, 
        CATEGORY_ID categoryID,
        UNIT,
        PRICE
      FROM PRODUCTS
	  WHERE PRODUCT_ID LIKE #{productID}

	</select>
	<select id="selectProducts" resultMap="result" 
	parameterType="com.bit_etland.web.cmm.Proxy">
	  SELECT P.*
	  FROM (SELECT @ROWNUM:=@ROWNUM+1 as no,T.*
	  		 FROM(SELECT @ROWNUM:=@ROWNUM+1 as no1, a.*
	  		 		FROM (SELECT C.*
	  		  		 		FROM PRODUCTS C
			  		 		WHERE (@ROWNUM:=0)=0)a)T
	  		WHERE (@ROWNUM:=0)=0	  		 
	  		ORDER BY no1 DESC)P
	  WHERE no BETWEEN #{startRow} AND #{endRow};
  	
	</select>
	<select id="countProducts" resultType="Integer">
	  SELECT COUNT(*)
  	  FROM PRODUCTS	  
	</select>
	<insert
		 id="insertProduct" 
		 parameterType="com.bit_etland.web.prod.Product" 
		 flushCache="true"
		 statementType="PREPARED"
		 timeout="20">
	  INSERT INTO PRODUCTS(PRODUCT_NAME,
	  						SUPPLIER_ID,
	  						CATEGORY_ID,
	  						UNIT,
	  						PRICE)
	VALUES(#{productName},
		   #{supplierID},
		   #{categoryID},
		   #{unit},
		   #{price});
 
 </insert>
  
</mapper>